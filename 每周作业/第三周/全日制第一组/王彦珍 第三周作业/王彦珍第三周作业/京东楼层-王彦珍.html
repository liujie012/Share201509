<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>京东楼层</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
            font-size: 14px;
            font-family: Arial, 'Times New Roman', 'Microsoft YaHei', SimHei;
            color: #666;
        }

        html, body {
            width: 100%;
            height: 100%;
        }

        ul, li {
            list-style: none;
        }

        .div1 {
            width: 30px;
            overflow: hidden;
            display: none;
            /*border: 1px solid red;*/
        }

        .div1 ul {
            overflow: hidden;
            background-color: rgba(255, 255, 255, .8);
            list-style: none;
            display: block;
            -webkit-margin-before: 1em;
            -webkit-margin-after: 1em;
            -webkit-margin-start: 0px;
            -webkit-margin-end: 0px;
        }

        .div1 ul li {
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            overflow: hidden;
            margin-top: -1px;
            cursor: pointer;
        }

        .div1 ul li a {
            display: block;
            width: 30px;
            height: 30px;
            margin: 0 auto;
            color: #625351;
            text-decoration: none;
            border-bottom: 1px dashed red;
            background: url(img/a.png) 0 0 no-repeat;
        }

        .div1 ul li:hover {
            background-color: #c81623;
        }

        .div1 li .etitle {
            background-color: #c81623;
            display: none;
            width: 30px;
            height: 30px;
            color: #fff;
            font-size: 12px;
        }

        .div1 ul li:hover .etitle {
            display: block;
        }

        .div1 ul li:hover span {
            color: #fff;
            /*display: none;*/

        }

        div.floor {
            width: 800px;
            /*height: 506px;*/
            margin: 10px auto;
            border: 1px solid red;

        }

        div.floor .head {
            height: 30px;
            border-bottom: 1px solid red;
        }

        div.floor .head h2 {
            line-height: 30px;
            position: relative;
            padding-left: 40px;
            font-family: "microsoft yahei";
            font-size: 20px;
        }

        .floor h2 i {
            position: absolute;
            top: 2px;
            left: 0;
            width: 21px;
            height: 25px;
            padding-right: 10px;
            background: url(img/floor1new.png) no-repeat 0 0;
            font-size: 13px;
            color: #fff;
            /*text-align: center;*/
            overflow: hidden;
            margin-right: 10px;
        }

        .floor:hover i {
            background: url(img/sprite_floor.png) no-repeat 0 0;
        }

        .floor:hover h2 {
            color: red;
        }

        .div2 {
            height: 470px;
        }

        .div2 img {
            width: 100%;
            height: 100%;
        }

        #goTo {
            /*display: none;*/
            position: fixed; /*固定定位，固定在当前页面的某一个位置*/
            right: 30px;
            bottom: 30px;
            width: 50px;
            height: 50px;
            line-height: 50px;
            text-align: center;
            border: 1px solid #ccc;
            background: #fa5889;
            cursor: pointer;
            /*以下是CSS3属性样式*/
            border-radius: 50%; /*当前的盒子是正方形会变为了一个圆*/
            -webkit-transform: rotate(-90deg);
            -moz-transform: rotate(-90deg);
            -ms-transform: rotate(-90deg);
            -o-transform: rotate(-90deg);
            transform: rotate(-90deg);
        }
    </style>
</head>
<body>
<div id="div1" class="div1" style="z-index: 5;position: fixed
 ;left:34.5px; top:13.5px ">
    <ul>
        <li>

            <span>1F</span>
            <a href="" class="etitle">服饰</a>
        </li>

        <li>
            <span>2F</span>
            <a href="" class="etitle">美妆</a>
        </li>
        <li>
            <span>3F</span>
            <!--<a href="">3F</a>-->
            <a href="" class="etitle">手机</a>
        </li>
        <li>
            <span>4F</span>
            <a href="" class="etitle">家电</a>
        </li>
        <li>
            <span>5F</span>
            <a href="" class="etitle">数码</a>
        </li>
        <li>
            <span>6F</span>
            <a href="" class="etitle">运动</a>
        </li>
        <li>
            <span>7F</span>
            <a href="" class="etitle">居家</a>
        </li>
        <li>
            <span>8F</span>
            <a href="" class="etitle">母婴</a>
        </li>
        <li>
            <span>9F</span>
            <a href="" class="etitle">食品</a>
        </li>
        <li>
            <span>10F</span>
            <a href="" class="etitle">图书</a>
        </li>
    </ul>
</div>
<div id="right">
    <div class="floor">
        <div class="head">
            <h2><i>1F</i>服装鞋包</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" trueImg="img/18.jpg"/>
        </div>
    </div>
    <div class="floor">
        <div class="head">
            <h2><i>2F</i>个护美妆</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" trueImg="img/19.jpg"/>
        </div>

    </div>
    <div class="floor">
        <div class="head">
            <h2><i>3F</i>手机通讯</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" width="880px" trueImg="img/11.jpg"/>
        </div>
    </div>
    <div class="floor">
        <div class="head">
            <h2><i>4F</i>家用电器</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" width="880px" height="549.6" trueImg="img/12.jpg"/>
        </div>
    </div>
    <div class="floor">
        <div class="head">
            <h2><i>5F</i>电脑数码</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" width="880px" height="549.6" trueImg="img/14.jpg"/>
        </div>
    </div>
    <div class="floor">
        <div class="head">
            <h2><i>6F</i>运动健身</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" width="880px" height="549.6" trueImg="img/17.jpg"/>
        </div>
    </div>
    <div class="floor">
        <div class="head">
            <h2><i>7F</i>居家生活</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" width="880px" height="549.6" trueImg="img/20.jpg"/>
        </div>
    </div>
    <div class="floor">
        <div class="head">
            <h2><i>8F</i>生活服务</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" width="880px" height="549.6" trueImg="img/22.jpg"/>
        </div>
    </div>
    <div class="floor">
        <div class="head">
            <h2><i>9F</i>食品保健</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" width="880px" height="549.6" trueImg="img/25.jpg"/>
        </div>
    </div>
    <div class="floor">
        <div class="head">
            <h2><i>10F</i>图书音像</h2>
        </div>
        <div class="div2">
            <img src="img/default.jpg" alt="" width="880px" height="549.6" trueImg="img/16.jpg"/>
        </div>

        <div id="goTo">&gt;</div>
    </div>
</div>
</body>
<script type="text/javascript" src="js/utils.js"></script>
<script type="text/javascript">
    var oDiv = document.getElementById("div1");
    var oLis = oDiv.getElementsByTagName("li");
    var right = document.getElementById("right");
    var imgList = right.getElementsByTagName("img");
    var goTo = document.getElementById("goTo");

    for (var i = 0; i < oLis.length; i++) {
        var cur = oLis[i];
        cur.zhufeng = i;
        cur.onclick = function () {
            var target1 = ( document.documentElement.clientHeight) * this.zhufeng || ( document.body.clientHeight) * this.zhufeng;
            var target2 = document.documentElement.scrollTop || document.body.scrollTop;
            var duration = 1000, interval = 10, step = (target2 / duration) * interval;
            var timer = window.setInterval(function () {
                if (target2 <= target1) {
                    window.clearInterval(timer);
                    window.onscroll = scrollMove;
                    return;
                }
                target2 -= step;
                document.documentElement.scrollTop = target2;
                document.body.scrollTop = target2;

            }, interval);
            var timer1 = window.setInterval(function () {
                if (target1 <= target2) {
                    window.clearInterval(timer1);
                    window.onscroll = scrollMove;
                    return;
                }
                target2 += step;
                document.documentElement.scrollTop = target2;
                document.body.scrollTop = target2;
            }, 1);
        }
    }

    goTo.onclick = function () {
        var target3 = document.documentElement.scrollTop || document.body.scrollTop;
        var duration = 1000, interval2 = 10, step = (target3 / duration) * interval2;
        var timer = window.setInterval(function () {
            if (target3 <= 0) {
                window.clearInterval(timer);
                window.onscroll = scrollMove;
                return;
            }
            target3 -= step;
            document.documentElement.scrollTop = target3;
            document.body.scrollTop = target3;
        }, interval2);
    };
    function init() {
        var curT = document.documentElement.scrollTop || document.body.scrollTop;
        var winH = document.documentElement.clientHeight || document.body.clientHeight;
        if (curT >= (winH / 2)) {
            oDiv.style.display = "block";
            goTo.style.display = "block";
        } else {
            oDiv.style.display = "none";
            goTo.style.display = "none";
        }
        for (var i = 0; i < imgList.length; i++) {
            ~function (i) {
                var curImg = imgList[i];
                if (curImg.isLoad) return;
                var curImgT = utils.offset(curImg).top + curImg.offsetHeight;
                var winT = (document.documentElement.clientHeight || document.body.clientHeight) + (document.documentElement.scrollTop || document.body.scrollTop);
                if (curImgT < winT) {
                    var oImg = new Image;
                    oImg.src = curImg.getAttribute("trueImg");
                    oImg.onload = function () {
                        //this->oImg
                        curImg.src = this.src;
                        curImg.isLoad = true;
                        fadeIn(curImg);
                    }
                }
            }(i);
        }
    }
    //4、实现让图片的透明度从零到一
    function fadeIn(curImg) {
        var step = (1 / 500) * 10;
        var count = 0;
        var timer = window.setInterval(function () {
            if (count >= 1) {
                window.clearInterval(timer);
                curImg.style.opacity = 1;
                curImg.style.filter = "alpha(opacity=100)";
                return;
            }
            count += step;
            curImg.style.opacity = count;
            curImg.style.filter = "alpha(opacity=" + count * 100 + ")";
        }, 10);
    }
    window.setTimeout(init, 500);
    window.onscroll = init;
</script>
</html>
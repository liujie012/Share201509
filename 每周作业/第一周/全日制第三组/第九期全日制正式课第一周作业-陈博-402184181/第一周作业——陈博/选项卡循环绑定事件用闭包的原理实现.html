<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>选项卡循环绑定事件用闭包的原理实现</title>
    <style type="text/css">
        *{margin: 0;
        padding: 0;}
        #card{
            width: 300px;
            height: 100%;
            background:lightslategrey;
            margin: 30px auto;
        }
        #card ul{
            list-style: none;
            text-align: center;
        }
        #card ul li{
            width: 95px;
            height: 50px;
            display: inline-block;
            text-align: center;
            background: green;
        }
        #card div {
            background:green ;
            width: 300px;
            height: 100px;
            display: none;
            margin: 0 0 0 4px;

        }
        #card .selectli{
            background: darkred;;
        }
        #card .selectDiv{
            background: darkred;
            display: block;
        }
    </style>
</head>
<body>
<div id="card">
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
    </ul>
    <div>1</div>
    <div>2</div>
    <div>3</div>
</div>
<script type="text/javascript">
    var card=document.getElementById('card');
    var oLi=card.getElementsByTagName('li');
    var oDiv=card.getElementsByTagName('div');
    oLi[0].className='selectli';
    oDiv[0].className='selectDiv';
//闭包写法1
/*for(i=0;i<oLi.length;i++){
     var cur =oLi[i];
     cur.onclick=(function(n){
     return function(){
         for(j=0;j<oLi.length;j++){
             oLi[j].className='';
             oDiv[j].className='';
         };
         oLi[n].className='selectli';
         oDiv[n].className='selectDiv';
         }
     })(i);
}*/
//闭包写法2
    function chang(n){
        for(j=0;j<oLi.length;j++){
            oLi[j].className='';
            oDiv[j].className='';
        };
        oLi[n].className='selectli';
        oDiv[n].className='selectDiv';
    };
    for(i=0;i<oLi.length;i++){
        var cur =oLi[i];
        (function(j){
            cur.onclick=function(){
                chang(j)
            };
        })(i);

    };

</script>
</body>
</html>